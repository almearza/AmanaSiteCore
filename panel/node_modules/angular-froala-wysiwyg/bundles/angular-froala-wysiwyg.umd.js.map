{"version":3,"file":"angular-froala-wysiwyg.umd.js","sources":["../../projects/library/src/editor/editor.directive.ts","../../projects/library/src/editor/editor.module.ts","../../projects/library/src/view/view.directive.ts","../../projects/library/src/view/view.module.ts","../../projects/library/src/fe-root.module.ts","../../projects/library/src/angular-froala-wysiwyg.ts"],"names":["EventEmitter","FroalaEditor","Directive","NG_VALUE_ACCESSOR","forwardRef","ElementRef","NgZone","Input","Output","NgModule","Renderer2"],"mappings":"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","sourcesContent":["import { ControlValueAccessor, NG_VALUE_ACCESSOR } from \"@angular/forms\";\r\nimport { Directive, ElementRef, EventEmitter, forwardRef, Input, NgZone, Output } from '@angular/core';\r\n\r\nimport FroalaEditor from 'froala-editor';\r\n\r\n@Directive({\r\n  selector: '[froalaEditor]',\r\n  exportAs: 'froalaEditor',\r\n  providers: [\r\n    {\r\n      provide: NG_VALUE_ACCESSOR,\r\n      useExisting: forwardRef(() => FroalaEditorDirective),\r\n      multi: true\r\n    }\r\n  ]\r\n})\r\nexport class FroalaEditorDirective implements ControlValueAccessor {\r\n\r\n  // editor options\r\n  private _opts: any = {\r\n    immediateAngularModelUpdate: false,\r\n    angularIgnoreAttrs: null\r\n  };\r\n\r\n  private _element: any;\r\n\r\n  private SPECIAL_TAGS: string[] = ['img', 'button', 'input', 'a'];\r\n  private INNER_HTML_ATTR: string = 'innerHTML';\r\n  private _hasSpecialTag: boolean = false;\r\n\r\n  // editor element\r\n  private _editor: any;\r\n\r\n  // initial editor content\r\n  private _model: string;\r\n\r\n  private _editorInitialized: boolean = false;\r\n\r\n  private _oldModel: string = null;\r\n\r\n  constructor(el: ElementRef, private zone: NgZone) {\r\n\r\n    let element: any = el.nativeElement;\r\n\r\n    // check if the element is a special tag\r\n    if (this.SPECIAL_TAGS.indexOf(element.tagName.toLowerCase()) != -1) {\r\n      this._hasSpecialTag = true;\r\n    }\r\n    this._element = element;\r\n\r\n    this.zone = zone;\r\n  }\r\n\r\n  // Begin ControlValueAccesor methods.\r\n  onChange = (_) => {\r\n  };\r\n  onTouched = () => {\r\n  };\r\n\r\n  // Form model content changed.\r\n  writeValue(content: any): void {\r\n    this.updateEditor(content);\r\n  }\r\n\r\n  registerOnChange(fn: (_: any) => void): void {\r\n    this.onChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: () => void): void {\r\n    this.onTouched = fn;\r\n  }\r\n\r\n  // End ControlValueAccesor methods.\r\n\r\n  // froalaEditor directive as input: store the editor options\r\n  @Input() set froalaEditor(opts: any) {\r\n    this._opts = this.clone(  opts || this._opts);\r\n    this._opts =  {...this._opts};\r\n  }\r\n\r\n   // TODO: replace clone method with better possible alternate \r\n  private clone(item) {\r\n  \tconst me = this;  \r\n      if (!item) { return item; } // null, undefined values check\r\n\r\n      let types = [ Number, String, Boolean ], \r\n          result;\r\n\r\n      // normalizing primitives if someone did new String('aaa'), or new Number('444');\r\n      types.forEach(function(type) {\r\n          if (item instanceof type) {\r\n              result = type( item );\r\n          }\r\n      });\r\n\r\n      if (typeof result == \"undefined\") {\r\n          if (Object.prototype.toString.call( item ) === \"[object Array]\") {\r\n              result = [];\r\n              item.forEach(function(child, index, array) { \r\n                  result[index] = me.clone( child );\r\n              });\r\n          } else if (typeof item == \"object\") {\r\n              // testing that this is DOM\r\n              if (item.nodeType && typeof item.cloneNode == \"function\") {\r\n                  result = item.cloneNode( true );    \r\n              } else if (!item.prototype) { // check that this is a literal\r\n                  if (item instanceof Date) {\r\n                      result = new Date(item);\r\n                  } else {\r\n                      // it is an object literal\r\n                      result = {};\r\n                      for (var i in item) {\r\n                          result[i] = me.clone( item[i] );\r\n                      }\r\n                  }\r\n              } else {\r\n                  if (false && item.constructor) {\r\n                      result = new item.constructor();\r\n                  } else {\r\n                      result = item;\r\n                  }\r\n              }\r\n          } else {\r\n              result = item;\r\n          }\r\n      }\r\n      return result;\r\n  }\r\n  // froalaModel directive as input: store initial editor content\r\n  @Input() set froalaModel(content: any) {\r\n    this.updateEditor(content);\r\n  }\r\n\r\n  // Update editor with model contents.\r\n  private updateEditor(content: any) {\r\n    if (JSON.stringify(this._oldModel) == JSON.stringify(content)) {\r\n      return;\r\n    }\r\n\r\n    if (!this._hasSpecialTag) {\r\n      this._oldModel = content;\r\n    } else {\r\n      this._model = content;\r\n    }\r\n\r\n    if (this._editorInitialized) {\r\n      if (!this._hasSpecialTag) {\r\n        this._editor.html.set(content);\r\n      } else {\r\n        this.setContent();\r\n      }\r\n    } else {\r\n      if (!this._hasSpecialTag) {\r\n        this._element.innerHTML = content || '';\r\n      } else {\r\n        this.setContent();\r\n      }\r\n    }\r\n  }\r\n\r\n  // froalaModel directive as output: update model if editor contentChanged\r\n  @Output() froalaModelChange: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  // froalaInit directive as output: send manual editor initialization\r\n  @Output() froalaInit: EventEmitter<Object> = new EventEmitter<Object>();\r\n\r\n  // update model if editor contentChanged\r\n  private updateModel() {\r\n    this.zone.run(() => {\r\n\r\n      let modelContent: any = null;\r\n\r\n      if (this._hasSpecialTag) {\r\n\r\n        let attributeNodes = this._element.attributes;\r\n        let attrs = {};\r\n\r\n        for (let i = 0; i < attributeNodes.length; i++) {\r\n\r\n          let attrName = attributeNodes[i].name;\r\n          if (this._opts.angularIgnoreAttrs && this._opts.angularIgnoreAttrs.indexOf(attrName) != -1) {\r\n            continue;\r\n          }\r\n\r\n          attrs[attrName] = attributeNodes[i].value;\r\n        }\r\n\r\n        if (this._element.innerHTML) {\r\n          attrs[this.INNER_HTML_ATTR] = this._element.innerHTML;\r\n        }\r\n\r\n        modelContent = attrs;\r\n      } else {\r\n\r\n        let returnedHtml: any = this._editor.html.get();\r\n        if (typeof returnedHtml === 'string') {\r\n          modelContent = returnedHtml;\r\n        }\r\n      }\r\n      if (this._oldModel !== modelContent) {\r\n        this._oldModel = modelContent;\r\n\r\n        // Update froalaModel.\r\n        this.froalaModelChange.emit(modelContent);\r\n\r\n        // Update form model.\r\n        this.onChange(modelContent);\r\n      }\r\n\r\n    })\r\n  }\r\n\r\n  private registerEvent(eventName, callback) {\r\n    if (!eventName || !callback) {\r\n      return;\r\n    }\r\n\r\n    if (!this._opts.events) {\r\n      this._opts.events = {};\r\n    }\r\n\r\n    this._opts.events[eventName] = callback;\r\n  }\r\n\r\n  private initListeners() {\r\n    let self = this;\r\n    // Check if we have events on the editor.\r\n    if (this._editor.events) {\r\n      // bind contentChange and keyup event to froalaModel\r\n      this._editor.events.on('contentChanged', function () {\r\n        self.updateModel();\r\n      });\r\n      this._editor.events.on('mousedown', function () {\r\n        setTimeout(function () {\r\n          self.onTouched();\r\n        }, 0);\r\n      });\r\n\r\n      if (this._opts.immediateAngularModelUpdate) {\r\n        this._editor.events.on('keyup', function () {\r\n          setTimeout(function () {\r\n            self.updateModel();\r\n          }, 0);\r\n        });\r\n      }\r\n    }\r\n\r\n    this._editorInitialized = true;\r\n  }\r\n\r\n  private createEditor() {\r\n    if (this._editorInitialized) {\r\n      return;\r\n    }\r\n\r\n    this.setContent(true);\r\n\r\n    // init editor\r\n    this.zone.runOutsideAngular(() => {\r\n      // Add listeners on initialized event.\r\n      if (!this._opts.events) this._opts.events = {};\r\n\r\n      // Register initialized event.\r\n      this.registerEvent('initialized', this._opts.events && this._opts.events.initialized);\r\n      const existingInitCallback = this._opts.events.initialized;\r\n      // Default initialized event.\r\n      if (!this._opts.events.initialized || !this._opts.events.initialized.overridden) {\r\n        this._opts.events.initialized = () => {\r\n          this.initListeners();\r\n          existingInitCallback && existingInitCallback.call(this._editor, this);\r\n        };\r\n        this._opts.events.initialized.overridden = true;\r\n      }\r\n\r\n      // Initialize the Froala Editor.\r\n      this._editor = new FroalaEditor(\r\n        this._element,\r\n        this._opts\r\n      );\r\n    });\r\n  }\r\n\r\n  private setHtml() {\r\n    this._editor.html.set(this._model || \"\");\r\n\r\n    // This will reset the undo stack everytime the model changes externally. Can we fix this?\r\n    this._editor.undo.reset();\r\n    this._editor.undo.saveStep();\r\n  }\r\n\r\n  private setContent(firstTime = false) {\r\n    let self = this;\r\n\r\n    // Set initial content\r\n    if (this._model || this._model == '') {\r\n      this._oldModel = this._model;\r\n      if (this._hasSpecialTag) {\r\n\r\n        let tags: Object = this._model;\r\n\r\n        // add tags on element\r\n        if (tags) {\r\n\r\n          for (let attr in tags) {\r\n            if (tags.hasOwnProperty(attr) && attr != this.INNER_HTML_ATTR) {\r\n              this._element.setAttribute(attr, tags[attr]);\r\n            }\r\n          }\r\n\r\n          if (tags.hasOwnProperty(this.INNER_HTML_ATTR)) {\r\n            this._element.innerHTML = tags[this.INNER_HTML_ATTR];\r\n          }\r\n        }\r\n      } else {\r\n        if (firstTime) {\r\n          this.registerEvent('initialized', function () {\r\n            self.setHtml();\r\n          });\r\n        } else {\r\n          self.setHtml();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private destroyEditor() {\r\n    if (this._editorInitialized) {\r\n      this._editor.destroy();\r\n      this._editorInitialized = false;\r\n    }\r\n  }\r\n\r\n  private getEditor() {\r\n    if (this._element) {\r\n      return this._editor;\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  // send manual editor initialization\r\n  private generateManualController() {\r\n    let controls = {\r\n      initialize: this.createEditor.bind(this),\r\n      destroy: this.destroyEditor.bind(this),\r\n      getEditor: this.getEditor.bind(this),\r\n    };\r\n    this.froalaInit.emit(controls);\r\n  }\r\n\r\n  // TODO not sure if ngOnInit is executed after @inputs\r\n  ngAfterViewInit() {\r\n    // check if output froalaInit is present. Maybe observers is private and should not be used?? TODO how to better test that an output directive is present.\r\n    if (!this.froalaInit.observers.length) {\r\n      this.createEditor();\r\n    } else {\r\n      this.generateManualController();\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroyEditor();\r\n  }\r\n\r\n  setDisabledState(isDisabled: boolean): void {\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\n\r\nimport { FroalaEditorDirective } from './editor.directive';\r\n\r\n@NgModule({\r\n  declarations: [FroalaEditorDirective],\r\n  exports: [FroalaEditorDirective]\r\n})\r\n\r\nexport class FroalaEditorModule {\r\n  public static forRoot(): ModuleWithProviders<FroalaEditorModule> {\r\n    return {ngModule: FroalaEditorModule, providers: []};\r\n  }\r\n}\r\n","import { Directive, ElementRef, Renderer2, Input } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[froalaView]'\r\n})\r\nexport class FroalaViewDirective {\r\n\r\n  private _element: HTMLElement;\r\n\r\n  constructor(private renderer: Renderer2, element: ElementRef) {\r\n    this._element = element.nativeElement;\r\n  }\r\n\r\n  // update content model as it comes\r\n  @Input() set froalaView(content: string) {\r\n    this._element.innerHTML = content;\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.renderer.addClass(this._element, \"fr-view\");\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\n\r\nimport { FroalaViewDirective } from './view.directive';\r\n\r\n@NgModule({\r\n  declarations: [FroalaViewDirective],\r\n  exports: [FroalaViewDirective]\r\n})\r\nexport class FroalaViewModule {\r\n  public static forRoot(): ModuleWithProviders<FroalaViewModule> {\r\n    return {ngModule: FroalaViewModule, providers: []};\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { FroalaEditorModule } from './editor/editor.module';\r\nimport { FroalaViewModule } from './view/view.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    FroalaEditorModule.forRoot(),\r\n    FroalaViewModule.forRoot()\r\n  ],\r\n  exports: [\r\n    FroalaEditorModule,\r\n    FroalaViewModule\r\n  ]\r\n})\r\nexport class FERootModule {\r\n\r\n}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"]}